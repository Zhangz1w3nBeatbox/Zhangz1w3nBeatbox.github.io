<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="💎字节跳动夏令营项目 Tiktok" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="💎字节跳动夏令营项目-TikTok" /><meta property="og:description" content="💎字节跳动夏令营项目-TikTok" /><link rel="canonical" href="/posts/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E5%A4%8F%E4%BB%A4%E8%90%A5%E9%A1%B9%E7%9B%AE-TikTok/" /><meta property="og:url" content="/posts/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E5%A4%8F%E4%BB%A4%E8%90%A5%E9%A1%B9%E7%9B%AE-TikTok/" /><meta property="og:site_name" content="zhangz1w3nCode" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-08-13T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="💎字节跳动夏令营项目 Tiktok" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-08-13T00:00:00+00:00","datePublished":"2022-08-13T00:00:00+00:00","description":"💎字节跳动夏令营项目-TikTok","headline":"💎字节跳动夏令营项目 Tiktok","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E5%A4%8F%E4%BB%A4%E8%90%A5%E9%A1%B9%E7%9B%AE-TikTok/"},"url":"/posts/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E5%A4%8F%E4%BB%A4%E8%90%A5%E9%A1%B9%E7%9B%AE-TikTok/"}</script><title>💎字节跳动夏令营项目 Tiktok | zhangz1w3nCode</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="zhangz1w3nCode"><meta name="application-name" content="zhangz1w3nCode"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/config/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">zhangz1w3nCode</a></div><div class="site-subtitle font-italic">You can do all things!</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/zhangz1w3nCode" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['403592973','qq.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>💎字节跳动夏令营项目 Tiktok</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>💎字节跳动夏令营项目 Tiktok</h1><div class="post-meta text-muted"> <span> 发表于 <em class="" data-ts="1660348800" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2022/08/13 </em> </span><div class="d-flex justify-content-between"> <span> 作者 <em> <a href="https://twitter.com/username">zhangz1w3nCode</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4892 字"> <em>27 分钟</em>阅读</span></div></div></div><div class="post-content"><h3 id="字节跳动夏令营项目-tiktok"><span class="mr-2">💎字节跳动夏令营项目-TikTok</span><a href="#字节跳动夏令营项目-tiktok" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><h4 id="️项目背景"><span class="mr-2">⚙️<strong>项目背景</strong></span><a href="#️项目背景" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></blockquote><h6 id="此项目是字节跳动夏令营结营大项目--通过讲师所讲的内容-实现一个极简版的抖音-来切实感受-实践课程中学到的知识点-如-常用框架-网络-数据库-操作系统-工业数据结构算法-分布式对象存储-消息队列-以及性能优化-同时-能提升对未来的实际开发工作有更多的深入了解与认识-以及-个人技术成长或视野">⚫此项目是字节跳动夏令营结营大项目 通过讲师所讲的内容 实现一个极简版的抖音 来切实感受 实践课程中学到的知识点 如 常用框架 网络 数据库 操作系统 工业数据结构算法 分布式对象存储 消息队列 以及性能优化 同时 能提升对未来的实际开发工作有更多的深入了解与认识 以及 个人技术成长或视野</h6><blockquote><h4 id="️项目架构"><span class="mr-2">⚙️<strong>项目架构</strong></span><a href="#️项目架构" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></blockquote><p><a href="http://106.14.35.137:9000/tiktok/Tiktok-construction.jpg" class="popup img-link "><img data-src="http://106.14.35.137:9000/tiktok/Tiktok-construction.jpg" alt="" class="lazyload" data-proofer-ignore></a></p><blockquote><h4 id="️项目模块"><span class="mr-2">⚙️<strong>项目模块</strong></span><a href="#️项目模块" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></blockquote><h5 id="️后端采用主流的mvc架构"><span class="mr-2">⭐️后端采用主流的MVC架构</span><a href="#️后端采用主流的mvc架构" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><h6 id="1⃣️用户业务模块">1⃣️<code class="language-plaintext highlighter-rouge">用户业务模块</code>：</h6><h6 id="登录注册模块redis腾讯云短信jwt拦截器">⚫登录注册模块(Redis+腾讯云短信+JWT+拦截器)</h6><p>​ 用户通过输入手机号+验证码的方式 实现登录、未注册的用户会创建一个新的账号 ​ 6位验证码由后端通过<code class="language-plaintext highlighter-rouge">(Math.random() * 9 + 1) * 100000</code> 生成 通过<strong>腾讯云的短信服务</strong> 发送到对应手机的用户 ​ 为了防止用户暴力登录和非法攻击 使用<strong>redis</strong>对于同一个IP地址的同一个手机号实现每隔60s才能发送的限制🚫—— <code class="language-plaintext highlighter-rouge">redis.setnx60s(MOBILE_SMSCODE+":"+ip,ip);</code> ​ 然后通过写好的 <code class="language-plaintext highlighter-rouge">PassportInterceptor</code> 登录拦截器 配合<code class="language-plaintext highlighter-rouge">InterceptorConfig(拦截器都要注册进来)</code> 来校验当前ip地址和redis的是否一致 不一致的话抛出异常 一致的话就继续 ​ 生产的验证码存入<strong>redis</strong>中——<code class="language-plaintext highlighter-rouge">redis.set(MOBILE_SMSCODE+":"+mobile(手机号),code(验证码),30*60);</code> ​ 用户登录成功后会通过<strong>JWT</strong>生成==Token== 然后用<strong>redis</strong>将其缓存——<code class="language-plaintext highlighter-rouge">redis.set(REDIS_USER_TOKEN+":"+users.getId(),JWTtoken);</code> ​ 最后数据存入<strong>MySQL</strong>并且把对应的验证码缓存删除 最后返回 对应对象给app ​ 如果用户退出登录则删除对应redis缓存 <code class="language-plaintext highlighter-rouge">redis.del(REDIS_USER_TOKEN+":"+userId);</code> ​ ⚠️==Tips==: ​ ·对BO的字段的样子 通过validation类去验证 同时在接口层架<code class="language-plaintext highlighter-rouge">@valid注解开始验证</code> ​ ·如果捕获到字段不正确 通过自定义的ExceptionHandler和自定义的Excepition去抛出异常</p><h6 id="用户信息模块redisminio拦截器">⚫用户信息模块(Redis+MinIO+拦截器)</h6><p>​ ⚫查询个人信息接口 ​ 通过传入的用户电话去数据库找 返回一个user对象 然后将其转换为 userVO对象 同时用beanUtils拷贝类的信息 然后对userVO中要展示的粉丝 关注 点赞 属性进行赋值 (通过去<strong>Redis</strong> 中去取对应的用户的粉丝 关注 点赞 值) <code class="language-plaintext highlighter-rouge">redis.get(REDIS_MY_XXX_COUNTS + ":" + userId)「XXX为FANS、FOLLOW、LIKE」;</code>最后返回UserVO对象给前端做渲染</p><p>​ ⚫修改个人信息接口: ​ 通过传入的updateUserBO对象 去数据库覆盖对应的信息 通过前端传入的每一项type判断要修改哪一个选项(tiktok号、姓名、性别、星座、地址···) 最后返回前端修改完成的User对象</p><p>​ ⚫修改个人头像和背景接口 ​ 但点击图片或者背景 通过<strong>MinIO</strong>的去上传对应图片 指定 MinIO的桶名、文件的名字、file文件流 通过提前写好的MinIO配置类上传文件或者图片到MinIO中 ​ 上传完成后获取对应的信息拼接成一个 外部能访问的url地址<code class="language-plaintext highlighter-rouge">String url = minIOConfig.getFileHost()+"/"+bucketName+"/"+filename;</code> ​ 然后构建updateUserBO对象 为其url属性赋值 这里通过前端给的参数判断对象是修改设置头像还是背景的值 然后修改数据同步到Mysql 最后返回对象 ​ 其中为这个接口设计的拦截器 <code class="language-plaintext highlighter-rouge">UserTokenInterceptor</code>用于去验证 当前本地的用户和token令牌 通过id从<strong>redis</strong>中拿到了 token值 然后对这个token值进行解压 得到用户id ​ 如果得到的 用户id和当前的一致的话说明 验证通过拦截器放行 否则抛出异常 此外此拦截器还要注册到对应的<code class="language-plaintext highlighter-rouge">InterceptorConfig</code>中去 要去绑定验证的请求路径 ​ <code class="language-plaintext highlighter-rouge">String redisToken = redis.get(REDIS_USER_TOKEN + ":" + userId);</code></p><h6 id="2⃣️粉丝业务模块">2⃣️<code class="language-plaintext highlighter-rouge">粉丝业务模块</code>：</h6><h6 id="关注接口">⚫关注接口</h6><p>​ ⚫前端传入 用户id和博主id 通过查询用户方法 查看这两个人是否存在数据库 如果存在 则 通过 粉丝service层创建 fans对象 存入数据库中 ​ 创建 Fans类 设置主键值(一个工具随机生成)、vlogerId、fansId、互相关注字段(通过一个方法查看当前用户的粉丝列表是否有博主 如果有那么两者的互粉字段设置为1) ​ 数据插入<strong>MySQL</strong></p><p>​ ⚫ 再用<strong>Redis</strong>存入 对应的关注数量 粉丝数量 以及粉丝和博主的关系 加快查询速度 ​ 我关注了一个人 我的关注➕1 —— <code class="language-plaintext highlighter-rouge">redis.increment (REDIS_MY_FOLLOWS_COUNTS+":"+myId,1);</code> ​ 博主被关注 博主的粉丝➕1 —— <code class="language-plaintext highlighter-rouge">redis.increment (REDIS_MY_FANS_COUNTS+":"+vlogerId,1);</code> ​ 设置一个键表示 粉丝和博主的关系⚛️ —— <code class="language-plaintext highlighter-rouge">redis.set(REDIS_FANS_AND_VLOGGER_RELATIONSHIP+":"+myId+":"+vlogerId,"1");</code></p><p>​ ⚫当关注一个人成功后 使用<strong>MongoDB</strong>创建一个msgMO对象(包括发送者的id、发送者的昵称、发送者的头像、消息的内容、消息类型、接受者的id、消息的创建时间)发送到MongoDB中 ​</p><h6 id="取消关注接口">⚫取消关注接口</h6><p>​ ⚫前端传入粉丝id和博主id 去查询 Fans表 先查看博主的粉丝列表 查看博主是否关注了我 如果关注了我 并且互粉状态为1 那么 就要 再去查看我是的粉丝是否有博主 如果有 把我的粉丝(博主)的互粉字段 设置为0 把我的粉丝(博主)更新到数据库 然后再从 博主的粉丝列表 删除我 让我不是他的粉丝</p><p>​ ⚫接着在<strong>Redis</strong>中把我的 关注数量 博主的粉丝数 以及 粉丝和博主的关系 设置设置为自减1</p><h6 id="我的关注接口">⚫我的关注接口</h6><p>​ ⚫通过myID去数据库 进行查询 -通过fans表和user表 去查询对应的信息 然后分页表示出来 ​ 对应的<code class="language-plaintext highlighter-rouge">SQL</code>语句</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">SELECT</span>
	<span class="n">u</span><span class="p">.</span><span class="n">id</span> <span class="k">AS</span> <span class="n">vlogerId</span><span class="p">,</span>
	<span class="n">u</span><span class="p">.</span><span class="n">face</span> <span class="k">AS</span> <span class="n">face</span><span class="p">,</span>
	<span class="n">u</span><span class="p">.</span><span class="n">nickname</span> <span class="k">AS</span> <span class="n">nickname</span> 
<span class="k">FROM</span> <span class="n">fans</span> <span class="n">f</span>
<span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">users</span> <span class="n">u</span> 
<span class="k">ON</span> <span class="n">f</span><span class="p">.</span><span class="n">vloger_id</span> <span class="o">=</span> <span class="n">u</span><span class="p">.</span><span class="n">id</span> 
<span class="k">WHERE</span> <span class="n">f</span><span class="p">.</span><span class="n">fan_id</span> <span class="o">=</span> <span class="mi">1</span> 
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">u</span><span class="p">.</span><span class="n">nickname</span>
<span class="k">ASC</span> 
</pre></table></code></div></div><h6 id="我的粉丝列表接口">⚫我的粉丝列表接口</h6><p>​ ⚫通过传入的myId去数据库 进行查询 -通过fans表和user表 去查询对应的信息 然后分页表示出来</p><h6 id="sql语句"><code class="language-plaintext highlighter-rouge">SQL语句</code></h6><pre><code class="language-SQL">SELECT
	u.id AS vlogerId,
	u.face AS face,
	u.nickname AS nickname 
FROM fans f
LEFT JOIN users u 
ON f.fans_id = u.id 
WHERE f.vlogerId = xxx 
ORDER BY u.nickname
ASC
</code></pre><h6 id="3⃣️视频业务模块">3⃣️<code class="language-plaintext highlighter-rouge">视频业务模块</code>:</h6><h6 id="上传视频接口">⚫上传视频接口</h6><p>​ ⚫由前端上传到<strong>uni_cloud</strong>的<strong>OSS</strong>中 然后返回 一个vlogBo对象 再把vlogBo 通过beanUtil工具类进行值的拷贝 最后存入MySQL数据库</p><h6 id="推荐列表接口">⚫推荐列表接口</h6><p>​ ⚫前端传入 用户id和搜索的关键词 ​ ⚫通过数据库 用户表和视频表的关联查询 vlog.vloger.id = u.id 并且 is_private是0 也就是公开的视频 并且 视频的titile = 传入的keyword 按照 创建时间的倒叙排列 ​ ⚠️ 此处的使用了 <code class="language-plaintext highlighter-rouge">like = "%xxxx%"</code>方式去模糊查询 但是设置的<em>索引会失效</em> 可以使用<strong>ES</strong>去优化查询速度 ​ ⚫最后返回查询的视频列表</p><h6 id="获取视频详情接口">⚫获取视频详情接口</h6><p>​ ⚫前端传入 视频的id 以及 用户id 通过视频id 作为条件 让用户表和视频表的关联查询 vlog.vloger.id = user.id 条件是 vlog id = 传入视频id 返回对应的一条视频详情 返回前端</p><h6 id="设为私密视频接口">⚫设为私密视频接口</h6><p>​ ⚫前端传入 视频的id 以及 用户id 通过视频id 作为条件 再把vlog的is_private设置为1(表示私密) 构成一个新的vlog对象 去数据库中更新对于对象</p><h6 id="设为公开视频接口">⚫设为公开视频接口</h6><p>​ ⚫前端传入 视频的id 以及 用户id 通过视频id 作为条件 再把vlog的is_private设置为0(表示公开) 构成一个新的vlog对象 去数据库中更新对于对象</p><h6 id="我的私密视频">⚫我的私密视频</h6><p>​ ⚫前端传入 用户id 和 视频vlog的is_private为1(表示私密) 作为条件 构成一个新的vlog对象 去vlog表中数据库中查找vlog集合 并且 分页返回</p><h6 id="我的公开视频">⚫我的公开视频</h6><p>​ ⚫前端传入 用户id 和 视频vlog的is_private为0(表示公开) 作为条件 构成一个新的vlog对象 去vlog表中数据库中查找vlog集合 并且 分页返回</p><h6 id="点赞视频操作对点赞表操作">⚫点赞视频操作(对点赞表操作)</h6><p>​ ⚫通过 用户id和视频id 为条件 以及生成的主键ID 构建一个LikeVlog类 用于对应数据库中的表 然后将其插入MySQL 即可完成点赞 ​ ⚫点赞完成后 还有构建一个msgMO对象(包含发送信息用户、接受信息用户以及视频的相关信息) 存入<strong>MongoDB</strong>完成消息提醒功能 ​ ⚫之后 因为视频点赞数 以及 用户是否喜欢 某视频的关系 可以通过<strong>Redis</strong>去记录这些数字信息 ​ ·点赞了一个视频就 让点赞数 自增1<code class="language-plaintext highlighter-rouge">redis.increment(REDIS_VLOG_BE_LIKED_COUNTS+":"+vlogId,1);</code> ​ ·点赞了表示用户喜欢某个视频 <code class="language-plaintext highlighter-rouge">redis.set(REDIS_USER_LIKE_VLOG+":"+userId+":"+vlogId,"1");</code></p><h6 id="取消视频操作">⚫取消视频操作</h6><p>​ ⚫通过 用户id和视频id 为条件 以及生成的主键ID 构建一个LikeVlog类 用于对应数据库中的表 然后将其删除MySQL 即可完成取消点赞点赞 ​ ​ ⚫之后 因为视频点赞数 也存在于Redis中 故redis也要做同步的删除 ​ ·取消点赞了一个视频就 让点赞数 自减1<code class="language-plaintext highlighter-rouge">redis.increment(REDIS_VLOG_BE_LIKED_COUNTS+":"+vlogId,1);</code> ​ ·取消 点赞了 表示用户不喜欢某个视频 把代表其关系的key做一个删除 <code class="language-plaintext highlighter-rouge">redis.del(REDIS_USER_LIKE_VLOG+":"+userId+":"+vlogId);</code></p><h6 id="我的点赞视频列表">⚫我的点赞视频列表</h6><p>​ ⚫通过用户id去数据库中查询 myLike和vlog表 做关联<code class="language-plaintext highlighter-rouge">v.id = mlv.vlog_id</code> 并且视频是公开的 获取对应视频列表 然后返回队友点赞List</p><h6 id="关注的人视频列表">⚫关注的人视频列表</h6><p>​ ⚫通过 用户id 去表vlog 和 fans 表 中做关联查询 v.通过用户id去找到对应关注的博主 然后 通过博主 id去vlog表中找 其发表的视频列表信息 并且视频必须是公开的</p><h6 id="我的朋友视频列表">⚫我的朋友视频列表</h6><p>​ ⚫通过 用户id 去表vlog 和 fans 表 中做关联查询 v.通过用户id去找到对应关注的博主 双方要是互关的状态 然后 通过博主的id去vlog表中找 其发表的视频列表信息 并且视频必须是公开的</p><h6 id="4⃣️评论业务模块">4⃣️<code class="language-plaintext highlighter-rouge">评论业务模块</code>:</h6><h6 id="创建评论">⚫创建评论</h6><p>​ ⚫前端传入CommentBO对象 然后对将其设置id 时间 将其转化为 Comment对象 再将其插入MySQL评论表中 ​ <strong>redis</strong>中添加一个字段 表示某个视频被点赞的次数 用于前端的快速获取<code class="language-plaintext highlighter-rouge">redis.increment(REDIS_VLOG_COMMENT_COUNTS+":"+commentBO.getVlogId(),1);</code> ​ ⚫添加完评论后要通知 被评论的视频博主 使用<strong>MongoDB</strong>先构建msgMO对象(设置发送人信息、接受者信息、发送的具体消息、消息类型[评论消息、还是回复评论消息]) 入库</p><h6 id="获取评论">⚫获取评论</h6><p>​ ⚫从redis中获取某视频的评论数量 再返回 不用去数据库去统计 缓存了评论的数量 ​ ⚫通过 视频id 去 评论表中 找出对应视频的列表commentList 然后 把映射成commentVoList 对每一个 commentVo都要设置 视频被点赞的数量 以及视频被评论的总数去<strong>redis</strong>获取 作为 ​ 视图层的Comment对象</p><h6 id="删除评论">⚫删除评论</h6><p>​ ⚫前端传入 commentId、评论者id、评论的视频id ​ ⚫通过commentId和评论者id作为一个对象 删除对应的评论 ​ ⚫然后还要去redis中减少一条评论的数量 <code class="language-plaintext highlighter-rouge">redis.decrement(REDIS_VLOG_COMMENT_COUNTS+":"+vlogId,1);</code></p><h6 id="点赞评论">⚫点赞评论</h6><p>​ ⚫纯<strong>redis</strong>操作 不需要用到 mysql 只需要知道是那条评论和哪个人就行了 ​ ⚫如果点赞了一条评论 首先要会构建一条消息发送给MongoDB ​ ⚫通过评论id可以拿到 评论 以及 博主id 从而得到视频的信息 ​ ⚫然后构建一个msgMO对象 发送到 mongoDB 完成的对视频评论的点赞消息 入库</p><p>​ ⚫之后还要对redis中 某条评论的评论数量自增1 ​ <code class="language-plaintext highlighter-rouge">redis.increment(REDIS_VLOG_COMMENT_LIKED_COUNTS+":"+commentId,1);</code> ​ ⚫以及某人点赞了某个视频的关系 设置一个key ​ <code class="language-plaintext highlighter-rouge">redis.set(REDIS_USER_LIKE_COMMENT+":"+userId+":"+commentId,"1");</code></p><h6 id="取消点赞评论">⚫取消点赞评论</h6><p>​ ⚫对redis中某条评论的评论数量数自减1 ​ <code class="language-plaintext highlighter-rouge">redis.dcrement(REDIS_VLOG_COMMENT_LIKED_COUNTS+":"+commentId,1);</code> ​ ⚫以及某人点赞了某个视频的关系 删除代表关系的这个key ​ <code class="language-plaintext highlighter-rouge">redis.del(REDIS_USER_LIKE_COMMENT+":"+userId+":"+commentId);</code></p><h6 id="5⃣️消息业务模块">5⃣️<code class="language-plaintext highlighter-rouge">消息业务模块</code></h6><h6 id="消息的创建">⚫消息的创建</h6><p>​ ⚫通过构建一个msgMO的对象 ​ 消息的发送者、接受者、消息类型、消息的内容、发送者昵称、发送者的头像和消息的发送时间 最后存入<strong>MongoDB</strong></p><h6 id="消息的获取">⚫消息的获取</h6><p>​ ⚫前端传过来的用户id作为 toUserID 去查询所有消息</p><blockquote><h4 id="️技术选型"><span class="mr-2">⚙️<strong>技术选型</strong></span><a href="#️技术选型" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></blockquote><h5 id="️前后端分离架构"><span class="mr-2">⭐️前后端分离架构</span><a href="#️前后端分离架构" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h5><h6 id="1⃣️前端uni_appuni_cloudvuehtmlcss">1⃣️<code class="language-plaintext highlighter-rouge">前端</code>：Uni_App、Uni_Cloud、Vue、Html、Css</h6><h6 id="2⃣️后端java">2⃣️<code class="language-plaintext highlighter-rouge">后端</code>：Java</h6><h6 id="3⃣️框架-springmvcspringbootmybatis">3⃣️<code class="language-plaintext highlighter-rouge">框架</code>: SpringMVC、SpringBoot、MyBatis</h6><h6 id="4⃣️数据库-mysql">4⃣️<code class="language-plaintext highlighter-rouge">数据库</code>: MySQL</h6><h6 id="5⃣️中间件-redismongodbrabbitmqminionginxelk">5⃣️<code class="language-plaintext highlighter-rouge">中间件</code>: Redis、MongoDB、RabbitMQ、MinIO、Nginx、ELK</h6><h6 id="6⃣️devops-gitmavenlinux">6⃣️<code class="language-plaintext highlighter-rouge">DevOps</code>: Git、Maven、Linux</h6><blockquote><h4 id="️项目优化"><span class="mr-2">⚙️<strong>项目优化</strong></span><a href="#️项目优化" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></blockquote><h6 id="1⃣️网络">1⃣️<code class="language-plaintext highlighter-rouge">网络</code></h6><h6 id="cdn加速">⚫CDN加速⏩:</h6><p>​ ⚫起因:用户加载视频的时间长 app的整体体验感不好<br /> ​ ⚫解决:使用阿里云的CDN加速 将app视频分发至全球各地最接近用户的节点 缩短用户到节点的物理距离,使用户可就近取得所需内容,降低延迟</p><h6 id="nginx反向代理">⚫Nginx反向代理⏩:</h6><p>​ ⚫起因:当用户访问量高的时候 造成单结点的服务器的压力很大<br /> ​ ⚫解决:使用Nginx的反向代理技术和负载均衡策略 app部署在不同的云服务器上 通过统一的域名进入 Nginx则对请求进行分发 减轻了服务器的压力 提高了系统的吞吐量 ​ ⚫效果:使用Jmeter对评论接口进行了测试 在服务器测试 开启Nginx和不开启Nginx的效果 在5k流量下 ==性能提升效果提升显著 平均响应时间降低64% 吞吐量提升5倍== <a href="http://106.14.35.137:9000/tiktok/noNginx.png" class="popup img-link "><img data-src="http://106.14.35.137:9000/tiktok/noNginx.png" alt="" class="lazyload" data-proofer-ignore></a></p><p><a href="http://106.14.35.137:9000/tiktok/Nginx.png" class="popup img-link "><img data-src="http://106.14.35.137:9000/tiktok/Nginx.png" alt="" class="lazyload" data-proofer-ignore></a></p><h6 id="2⃣️后端">2⃣️<code class="language-plaintext highlighter-rouge">后端</code>：</h6><h6 id="rabbitmq异步解耦">⚫RabbitMQ异步解耦</h6><p>​ ⚫起因: 由于每次进行点赞视频、关注用户、评论视频操作后都需要 把对应的信息发送到MongoDB 即在处理核心数据的后面<strong>同步</strong>的处理非核心的数据 如果此操作出现问题的话 那么会影响核心数据的处理 让整条调用链瘫痪 模块间会互相影响 从而增加了调用链长度 导致用户操作的时候得到的反馈和速度都不佳 ​ ⚫解决:使用消息中间件把同步调用改为异步调用 同时降低消息模块和其他模块之间的耦合度 具体采用RabbitMQ消息队列 ​ ⚫效果:使用Jmeter对接口进行了测试 在服务器测试 开启和不开启RabbitMQ的效果 在1w流量下 ==性能提升效果为 平均响应时间降低18% 吞吐量提升约2倍== <a href="http://106.14.35.137:9000/tiktok/noWithMq.png" class="popup img-link "><img data-src="http://106.14.35.137:9000/tiktok/noWithMq.png" alt="" class="lazyload" data-proofer-ignore></a> <a href="http://106.14.35.137:9000/tiktok/WithMq.png" class="popup img-link "><img data-src="http://106.14.35.137:9000/tiktok/WithMq.png" alt="" class="lazyload" data-proofer-ignore></a></p><h6 id="minio分布式存储">⚫MinIO分布式存储</h6><p>​ ⚫起因:传统的单机架构下 视频等静态资源都是放在服务器本地 当用户数量很多的时候 视频的存储是一个很大问题 造成单个的服务器的存储压力很大 所以需要找到一个 <em>海量存储</em> <em>简单易用</em>和<em>便宜</em>的存储系统 适合计算中间结果的服务器 <br /> ​ ⚫解决:使用MinIO进行分布式等对象存储 对象存储具有EB级别的海量存储 对象的数量不受限制 基于Restful 的http接口 简单易用 使用普通的x86服务器 租用便宜 具体流程是把用户上传的视频上传至MinIO服务器 后续访问静态资源的时候 只需要访问MinIO共享share出来的url就行了 减轻了服务器的压力 提高了系统性能</p><h6 id="3⃣️数据">3⃣️<code class="language-plaintext highlighter-rouge">数据</code>:</h6><h6 id="mysql索引查询优化">⚫MySQL索引查询优化</h6><p>​ ⚫起因:为了提高查询的响应速度 提升查询的效率 提升用户体验 ​ ⚫解决:在表的连接处或者where条件中 建立MySQL的索引 配合 Explain关键字 查看是否该查询走了索引 ​ ⚫效果:使用进行了对比测试 查看是否走了索引</p><h6 id="redis缓存热点数据">⚫Redis缓存热点数据</h6><p>​ ⚫起因:为了加快数据的响应 对数字的操作和存储 以及常用的数据 可以使用Redis进行缓存 ​ 1.登录接口: ​ 缓存ip地址 设置失效时间60s ​ 缓存验证码 失效时间 3*60s ​ 缓存Token 解决分布式Session问题 ​ 2.个人信息接口 ​ 缓存 用户的关注数 用户的粉丝数 以及获赞数 ​ 3.粉丝接口 ​ 用户关注博主 缓存 用户关注数+1、博主粉丝数+1、表示用户关注博主的键设置为1 ​ 用户取关博主 缓存 用户关注数-1、博主粉丝数-1、删除 表示用户关注博主的关系键 ​ 4.视频接口 ​ 视频被某人点赞 缓存 视频的被点赞数量 还有 表示拥护点赞了某条视频的键表示 两者有关系 ​ 视频被某人取消点赞 删除缓存 减少视频的被点赞数量 还有 删除 表示拥护点赞了某条视频的键 ​ 5.评论接口 ​ 视频被评论 缓存 视频被评论的数量+1 ​ 视频评论被删除 缓存 视频被评论的数量-1 ​ 6.评论点赞 ​ 视频的评论被点赞 缓存 评论被点赞的数量+1 以及 添加 代表视频评论被某人点赞的关系的键 ​ 视频的评论取消点赞 缓存 评论被点赞的数量-1 以及 删除代表视频评论被某人点赞的关系的键</p><p>​ ⚫解决:使用Redis进行缓存</p><h6 id="elk数据查询优化">⚫ELK数据查询优化</h6><p>​ ⚫起因:为了加快响应全文搜索等速度 由于全文搜索是对视频的titile和content做模糊查询<code class="language-plaintext highlighter-rouge">like %xxx%</code> 不能用索引去优化 因为会导致索引失效 ​ ⚫解决:使用ElasticSeach+Logstash+Kibana+IK分词器 先用logstash 把数据库数据同步到es中 再对es执行搜索 采用ik分词技术 利用es的倒排索引 提高了视频的查询速度 ​ ⚫效果:使用Jmeter对接口进行对比测试</p><blockquote><h4 id="️项目部署"><span class="mr-2">⚙️<strong>项目部署</strong></span><a href="#️项目部署" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4></blockquote><h6 id="1⃣️采用宝塔可视化ui阿里云项目部署上线">1⃣️采用宝塔可视化UI➕阿里云项目部署上线</h6><h6 id="2⃣️项目github地址httpsgithubcomzhangz1w3nbeatboxtiktok">2⃣️项目GitHub地址:<em>https://github.com/Zhangz1w3nBeatbox/TikTok</em></h6><h6 id="3⃣️项目安卓端演示地址http10614351379000tiktoktiktokapk">3⃣️项目安卓端演示地址:<em>http://106.14.35.137:9000/tiktok/TikTok.apk</em></h6></div><div class="post-tail-wrapper text-muted"><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%F0%9F%92%8E%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E5%A4%8F%E4%BB%A4%E8%90%A5%E9%A1%B9%E7%9B%AE%20Tiktok%20-%20zhangz1w3nCode&url=%2Fposts%2F%25E5%25AD%2597%25E8%258A%2582%25E8%25B7%25B3%25E5%258A%25A8%25E5%25A4%258F%25E4%25BB%25A4%25E8%2590%25A5%25E9%25A1%25B9%25E7%259B%25AE-TikTok%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%F0%9F%92%8E%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E5%A4%8F%E4%BB%A4%E8%90%A5%E9%A1%B9%E7%9B%AE%20Tiktok%20-%20zhangz1w3nCode&u=%2Fposts%2F%25E5%25AD%2597%25E8%258A%2582%25E8%25B7%25B3%25E5%258A%25A8%25E5%25A4%258F%25E4%25BB%25A4%25E8%2590%25A5%25E9%25A1%25B9%25E7%259B%25AE-TikTok%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2F%25E5%25AD%2597%25E8%258A%2582%25E8%25B7%25B3%25E5%258A%25A8%25E5%25A4%258F%25E4%25BB%25A4%25E8%2590%25A5%25E9%25A1%25B9%25E7%259B%25AE-TikTok%2F&text=%F0%9F%92%8E%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E5%A4%8F%E4%BB%A4%E8%90%A5%E9%A1%B9%E7%9B%AE%20Tiktok%20-%20zhangz1w3nCode" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%E6%A0%B9%E5%A0%86/">堆</a><li><a href="/posts/Spring/">Spring</a><li><a href="/posts/%E7%AE%97%E6%B3%95-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/">📐算法 滑动窗口</a><li><a href="/posts/%E7%AE%97%E6%B3%95-%E5%9B%9E%E6%BA%AF/">📐算法 回溯</a><li><a href="/posts/%E7%AE%97%E6%B3%95-%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86/">📐算法 深度优先遍历</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%E5%8D%95%E8%B0%83%E6%A0%88/">单调栈</a> <a class="post-tag" href="/tags/%E5%8E%9F%E5%9C%B0%E5%93%88%E5%B8%8C/">原地哈希</a> <a class="post-tag" href="/tags/%E5%9B%9E%E6%BA%AF/">回溯</a> <a class="post-tag" href="/tags/%E5%A0%86/">堆</a> <a class="post-tag" href="/tags/%E5%A4%9A%E6%8C%87%E9%92%88/">多指针</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">文章内容</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%E6%A0%B9%E5%A0%86/"><div class="card-body"> <em class="small" data-ts="1696646040" data-df="YYYY/MM/DD" > 2023/10/07 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>堆</h3><div class="text-muted small"><p> 堆 🟧概述 🔻含义： 堆是通过数组化二叉树 同时通过构建堆和重建堆 来实现获取最大值和最小值的数据结构 🔻试用场景： 查找最大值和最小值、排序、频率、topK问题 🔻时间复杂度： O(nlogN) 🔻空间复杂度： O(1) 🔻注意事项： 🔸是使用大根堆还是小根堆 🟧模板 📌优先队列 1 2 3 4 5 6 7 8 9 class Solution { pu...</p></div></div></a></div><div class="card"> <a href="/posts/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/"><div class="card-body"> <em class="small" data-ts="1696646040" data-df="YYYY/MM/DD" > 2023/10/07 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>滑动窗口</h3><div class="text-muted small"><p> 滑动窗口 🟧概述 🔻含义： 使用一个零时变量记录过程值 当这个过程值满足题目要求时候 就收敛窗口直到过程值不满足题目要求 否则一直扩大窗口统计值 🔻试用场景： 查找连续正数数组或字符串以及子数组、子串问题 🔻时间复杂度： O(n²)-&amp;gt;O(n) 🔻空间复杂度： O(n) 🔻注意事项： 🔸满足滑动窗口的单调性 🔸过程变量的选择(数组、普通变量、容器) 收敛扩大窗口的时机(...</p></div></div></a></div><div class="card"> <a href="/posts/%E5%9B%9E%E6%BA%AF/"><div class="card-body"> <em class="small" data-ts="1696646040" data-df="YYYY/MM/DD" > 2023/10/07 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>回溯</h3><div class="text-muted small"><p> 回溯 🟧概述 🔻含义： 回溯算法实际上一个类似枚举的搜索尝试过程，主要是在搜索尝试过程中寻找问题的解，当发现已不满足求解条件时，就 回溯 返回，尝试别的路径 🔻试用场景： 排列组合、优化穷举等 🔻时间复杂度： 具体问题具体分析 🔻空间复杂度： 递归枚举需要用到栈 🔻注意事项： 🔸单个path回溯完毕后要删除上一次回溯的节点:path.remove(path.size()-1);...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B_Volatile/" class="btn btn-outline-primary" prompt="上一篇"><p>💎并发编程_volatile</p></a> <a href="/posts/Os-InputAndOutput/" class="btn btn-outline-primary" prompt="下一篇"><p>Os Inputandoutput</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/%E5%8D%95%E8%B0%83%E6%A0%88/">单调栈</a> <a class="post-tag" href="/tags/%E5%8E%9F%E5%9C%B0%E5%93%88%E5%B8%8C/">原地哈希</a> <a class="post-tag" href="/tags/%E5%9B%9E%E6%BA%AF/">回溯</a> <a class="post-tag" href="/tags/%E5%A0%86/">堆</a> <a class="post-tag" href="/tags/%E5%A4%9A%E6%8C%87%E9%92%88/">多指针</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/username">zhangz1w3nCode</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0">本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
